---
source: crates/php-parser/tests/integration.rs
expression: result.program
---
stmts:
  - kind:
      Declare:
        - - - strict_types
            - kind:
                Int: 1
              span:
                start: 27
                end: 28
        - ~
    span:
      start: 6
      end: 32
  - kind:
      Namespace:
        name:
          parts:
            - App
            - Repository
          kind: Qualified
          span:
            start: 42
            end: 56
        body: Simple
    span:
      start: 32
      end: 59
  - kind:
      Use:
        kind: Normal
        uses:
          - name:
              parts:
                - App
                - Models
                - User
              kind: Qualified
              span:
                start: 63
                end: 78
            alias: ~
            span:
              start: 63
              end: 78
    span:
      start: 59
      end: 80
  - kind:
      Use:
        kind: Normal
        uses:
          - name:
              parts:
                - App
                - Database
                - Connection
              kind: Qualified
              span:
                start: 84
                end: 108
            alias: DB
            span:
              start: 84
              end: 113
    span:
      start: 80
      end: 115
  - kind:
      Use:
        kind: Function
        uses:
          - name:
              parts:
                - App
                - Helpers
                - sanitize
              kind: Qualified
              span:
                start: 128
                end: 148
            alias: ~
            span:
              start: 128
              end: 148
    span:
      start: 115
      end: 151
  - kind:
      Interface:
        name: RepositoryInterface
        extends: []
        members:
          - kind:
              Method:
                name: find
                visibility: Public
                is_static: false
                is_abstract: false
                is_final: false
                by_ref: false
                params:
                  - name: id
                    type_hint:
                      kind:
                        Named:
                          parts:
                            - int
                          kind: Unqualified
                          span:
                            start: 208
                            end: 211
                      span:
                        start: 208
                        end: 211
                    default: ~
                    by_ref: false
                    variadic: false
                    visibility: ~
                    attributes: []
                    span:
                      start: 208
                      end: 215
                return_type:
                  kind:
                    Nullable:
                      kind:
                        Named:
                          parts:
                            - User
                          kind: Unqualified
                          span:
                            start: 219
                            end: 223
                      span:
                        start: 219
                        end: 223
                  span:
                    start: 218
                    end: 223
                body: ~
                attributes: []
            span:
              start: 187
              end: 229
          - kind:
              Method:
                name: findAll
                visibility: Public
                is_static: false
                is_abstract: false
                is_final: false
                by_ref: false
                params: []
                return_type:
                  kind:
                    Named:
                      parts:
                        - array
                      kind: Unqualified
                      span:
                        start: 256
                        end: 261
                  span:
                    start: 256
                    end: 261
                body: ~
                attributes: []
            span:
              start: 229
              end: 267
          - kind:
              Method:
                name: save
                visibility: Public
                is_static: false
                is_abstract: false
                is_final: false
                by_ref: false
                params:
                  - name: user
                    type_hint:
                      kind:
                        Named:
                          parts:
                            - User
                          kind: Unqualified
                          span:
                            start: 288
                            end: 293
                      span:
                        start: 288
                        end: 293
                    default: ~
                    by_ref: false
                    variadic: false
                    visibility: ~
                    attributes: []
                    span:
                      start: 288
                      end: 298
                return_type:
                  kind:
                    Named:
                      parts:
                        - void
                      kind: Unqualified
                      span:
                        start: 301
                        end: 305
                  span:
                    start: 301
                    end: 305
                body: ~
                attributes: []
            span:
              start: 267
              end: 311
          - kind:
              Method:
                name: delete
                visibility: Public
                is_static: false
                is_abstract: false
                is_final: false
                by_ref: false
                params:
                  - name: id
                    type_hint:
                      kind:
                        Named:
                          parts:
                            - int
                          kind: Unqualified
                          span:
                            start: 334
                            end: 337
                      span:
                        start: 334
                        end: 337
                    default: ~
                    by_ref: false
                    variadic: false
                    visibility: ~
                    attributes: []
                    span:
                      start: 334
                      end: 341
                return_type:
                  kind:
                    Named:
                      parts:
                        - void
                      kind: Unqualified
                      span:
                        start: 344
                        end: 348
                  span:
                    start: 344
                    end: 348
                body: ~
                attributes: []
            span:
              start: 311
              end: 350
        attributes: []
    span:
      start: 151
      end: 351
  - kind:
      Class:
        name: AbstractRepository
        modifiers:
          is_abstract: true
          is_final: false
          is_readonly: false
        extends: ~
        implements: []
        members:
          - kind:
              Property:
                name: db
                visibility: Protected
                is_static: false
                is_readonly: true
                type_hint:
                  kind:
                    Named:
                      parts:
                        - DB
                      kind: Unqualified
                      span:
                        start: 412
                        end: 415
                  span:
                    start: 412
                    end: 415
                default: ~
                attributes: []
            span:
              start: 393
              end: 425
          - kind:
              Method:
                name: __construct
                visibility: Public
                is_static: false
                is_abstract: false
                is_final: false
                by_ref: false
                params:
                  - name: db
                    type_hint:
                      kind:
                        Named:
                          parts:
                            - DB
                          kind: Unqualified
                          span:
                            start: 453
                            end: 456
                      span:
                        start: 453
                        end: 456
                    default: ~
                    by_ref: false
                    variadic: false
                    visibility: ~
                    attributes: []
                    span:
                      start: 453
                      end: 459
                return_type: ~
                body:
                  - kind:
                      Expression:
                        kind:
                          Assign:
                            target:
                              kind:
                                PropertyAccess:
                                  object:
                                    kind:
                                      Variable: this
                                    span:
                                      start: 475
                                      end: 480
                                  property:
                                    kind:
                                      Identifier: db
                                    span:
                                      start: 482
                                      end: 484
                              span:
                                start: 475
                                end: 484
                            op: Assign
                            value:
                              kind:
                                Variable: db
                              span:
                                start: 487
                                end: 490
                        span:
                          start: 475
                          end: 490
                    span:
                      start: 475
                      end: 496
                attributes: []
            span:
              start: 425
              end: 503
          - kind:
              Method:
                name: tableName
                visibility: Protected
                is_static: false
                is_abstract: true
                is_final: false
                by_ref: false
                params: []
                return_type:
                  kind:
                    Named:
                      parts:
                        - string
                      kind: Unqualified
                      span:
                        start: 544
                        end: 550
                  span:
                    start: 544
                    end: 550
                body: ~
                attributes: []
            span:
              start: 503
              end: 556
          - kind:
              Method:
                name: hydrate
                visibility: Protected
                is_static: false
                is_abstract: true
                is_final: false
                by_ref: false
                params:
                  - name: row
                    type_hint:
                      kind:
                        Named:
                          parts:
                            - array
                          kind: Unqualified
                          span:
                            start: 592
                            end: 597
                      span:
                        start: 592
                        end: 597
                    default: ~
                    by_ref: false
                    variadic: false
                    visibility: ~
                    attributes: []
                    span:
                      start: 592
                      end: 602
                return_type:
                  kind:
                    Named:
                      parts:
                        - object
                      kind: Unqualified
                      span:
                        start: 605
                        end: 611
                  span:
                    start: 605
                    end: 611
                body: ~
                attributes: []
            span:
              start: 556
              end: 618
          - kind:
              Method:
                name: count
                visibility: Public
                is_static: false
                is_abstract: false
                is_final: true
                by_ref: false
                params: []
                return_type:
                  kind:
                    Named:
                      parts:
                        - int
                      kind: Unqualified
                      span:
                        start: 649
                        end: 652
                  span:
                    start: 649
                    end: 652
                body:
                  - kind:
                      Expression:
                        kind:
                          Assign:
                            target:
                              kind:
                                Variable: result
                              span:
                                start: 667
                                end: 674
                            op: Assign
                            value:
                              kind:
                                MethodCall:
                                  object:
                                    kind:
                                      PropertyAccess:
                                        object:
                                          kind:
                                            Variable: this
                                          span:
                                            start: 677
                                            end: 682
                                        property:
                                          kind:
                                            Identifier: db
                                          span:
                                            start: 684
                                            end: 686
                                    span:
                                      start: 677
                                      end: 686
                                  method:
                                    kind:
                                      Identifier: query
                                    span:
                                      start: 688
                                      end: 693
                                  args:
                                    - name: ~
                                      value:
                                        kind:
                                          Binary:
                                            left:
                                              kind:
                                                String: "SELECT COUNT(*) FROM "
                                              span:
                                                start: 694
                                                end: 717
                                            op: Concat
                                            right:
                                              kind:
                                                MethodCall:
                                                  object:
                                                    kind:
                                                      Variable: this
                                                    span:
                                                      start: 720
                                                      end: 725
                                                  method:
                                                    kind:
                                                      Identifier: tableName
                                                    span:
                                                      start: 727
                                                      end: 736
                                                  args: []
                                              span:
                                                start: 720
                                                end: 738
                                        span:
                                          start: 694
                                          end: 738
                                      unpack: false
                                      span:
                                        start: 694
                                        end: 738
                              span:
                                start: 677
                                end: 739
                        span:
                          start: 667
                          end: 739
                    span:
                      start: 667
                      end: 749
                  - kind:
                      Return:
                        kind:
                          Cast:
                            - Int
                            - kind:
                                ArrayAccess:
                                  array:
                                    kind:
                                      Variable: result
                                    span:
                                      start: 761
                                      end: 768
                                  index:
                                    kind:
                                      Int: 0
                                    span:
                                      start: 769
                                      end: 770
                              span:
                                start: 761
                                end: 771
                        span:
                          start: 756
                          end: 771
                    span:
                      start: 749
                      end: 777
                attributes: []
            span:
              start: 618
              end: 779
        attributes: []
    span:
      start: 362
      end: 780
  - kind:
      Class:
        name: UserRepository
        modifiers:
          is_abstract: false
          is_final: false
          is_readonly: false
        extends:
          parts:
            - AbstractRepository
          kind: Unqualified
          span:
            start: 811
            end: 830
        implements:
          - parts:
              - RepositoryInterface
            kind: Unqualified
            span:
              start: 841
              end: 861
        members:
          - kind:
              TraitUse:
                traits:
                  - parts:
                      - Cacheable
                    kind: Unqualified
                    span:
                      start: 871
                      end: 880
                  - parts:
                      - Loggable
                    kind: Unqualified
                    span:
                      start: 882
                      end: 890
                adaptations: []
            span:
              start: 867
              end: 897
          - kind:
              ClassConst:
                name: PER_PAGE
                visibility: Public
                value:
                  kind:
                    Int: 25
                  span:
                    start: 921
                    end: 923
                attributes: []
            span:
              start: 897
              end: 929
          - kind:
              Property:
                name: queryCount
                visibility: Private
                is_static: true
                is_readonly: false
                type_hint:
                  kind:
                    Named:
                      parts:
                        - int
                      kind: Unqualified
                      span:
                        start: 944
                        end: 947
                  span:
                    start: 944
                    end: 947
                default:
                  kind:
                    Int: 0
                  span:
                    start: 962
                    end: 963
                attributes: []
            span:
              start: 929
              end: 970
          - kind:
              Method:
                name: tableName
                visibility: Protected
                is_static: false
                is_abstract: false
                is_final: false
                by_ref: false
                params: []
                return_type:
                  kind:
                    Named:
                      parts:
                        - string
                      kind: Unqualified
                      span:
                        start: 1002
                        end: 1008
                  span:
                    start: 1002
                    end: 1008
                body:
                  - kind:
                      Return:
                        kind:
                          String: users
                        span:
                          start: 1030
                          end: 1037
                    span:
                      start: 1023
                      end: 1043
                attributes: []
            span:
              start: 970
              end: 1050
          - kind:
              Method:
                name: hydrate
                visibility: Protected
                is_static: false
                is_abstract: false
                is_final: false
                by_ref: false
                params:
                  - name: row
                    type_hint:
                      kind:
                        Named:
                          parts:
                            - array
                          kind: Unqualified
                          span:
                            start: 1077
                            end: 1082
                      span:
                        start: 1077
                        end: 1082
                    default: ~
                    by_ref: false
                    variadic: false
                    visibility: ~
                    attributes: []
                    span:
                      start: 1077
                      end: 1087
                return_type:
                  kind:
                    Named:
                      parts:
                        - User
                      kind: Unqualified
                      span:
                        start: 1090
                        end: 1099
                  span:
                    start: 1090
                    end: 1099
                body:
                  - kind:
                      Return:
                        kind:
                          New:
                            class:
                              kind:
                                Identifier: User
                              span:
                                start: 1120
                                end: 1124
                            args:
                              - name: id
                                value:
                                  kind:
                                    Cast:
                                      - Int
                                      - kind:
                                          ArrayAccess:
                                            array:
                                              kind:
                                                Variable: row
                                              span:
                                                start: 1147
                                                end: 1151
                                            index:
                                              kind:
                                                String: id
                                              span:
                                                start: 1152
                                                end: 1156
                                        span:
                                          start: 1147
                                          end: 1157
                                  span:
                                    start: 1142
                                    end: 1157
                                unpack: false
                                span:
                                  start: 1138
                                  end: 1157
                              - name: name
                                value:
                                  kind:
                                    ArrayAccess:
                                      array:
                                        kind:
                                          Variable: row
                                        span:
                                          start: 1177
                                          end: 1181
                                      index:
                                        kind:
                                          String: name
                                        span:
                                          start: 1182
                                          end: 1188
                                  span:
                                    start: 1177
                                    end: 1189
                                unpack: false
                                span:
                                  start: 1171
                                  end: 1189
                              - name: email
                                value:
                                  kind:
                                    NullCoalesce:
                                      left:
                                        kind:
                                          ArrayAccess:
                                            array:
                                              kind:
                                                Variable: row
                                              span:
                                                start: 1210
                                                end: 1214
                                            index:
                                              kind:
                                                String: email
                                              span:
                                                start: 1215
                                                end: 1222
                                        span:
                                          start: 1210
                                          end: 1224
                                      right:
                                        kind: "Null"
                                        span:
                                          start: 1227
                                          end: 1231
                                  span:
                                    start: 1210
                                    end: 1231
                                unpack: false
                                span:
                                  start: 1203
                                  end: 1231
                        span:
                          start: 1116
                          end: 1242
                    span:
                      start: 1109
                      end: 1248
                attributes: []
            span:
              start: 1050
              end: 1255
          - kind:
              Method:
                name: find
                visibility: Public
                is_static: false
                is_abstract: false
                is_final: false
                by_ref: false
                params:
                  - name: id
                    type_hint:
                      kind:
                        Named:
                          parts:
                            - int
                          kind: Unqualified
                          span:
                            start: 1276
                            end: 1279
                      span:
                        start: 1276
                        end: 1279
                    default: ~
                    by_ref: false
                    variadic: false
                    visibility: ~
                    attributes: []
                    span:
                      start: 1276
                      end: 1283
                return_type:
                  kind:
                    Nullable:
                      kind:
                        Named:
                          parts:
                            - User
                          kind: Unqualified
                          span:
                            start: 1287
                            end: 1296
                      span:
                        start: 1287
                        end: 1296
                  span:
                    start: 1286
                    end: 1296
                body:
                  - kind:
                      Expression:
                        kind:
                          UnaryPostfix:
                            operand:
                              kind:
                                StaticPropertyAccess:
                                  class:
                                    kind:
                                      Identifier: self
                                    span:
                                      start: 1306
                                      end: 1310
                                  member: queryCount
                              span:
                                start: 1306
                                end: 1323
                            op: PostIncrement
                        span:
                          start: 1306
                          end: 1325
                    span:
                      start: 1306
                      end: 1335
                  - kind:
                      Expression:
                        kind:
                          Assign:
                            target:
                              kind:
                                Variable: rows
                              span:
                                start: 1335
                                end: 1340
                            op: Assign
                            value:
                              kind:
                                MethodCall:
                                  object:
                                    kind:
                                      PropertyAccess:
                                        object:
                                          kind:
                                            Variable: this
                                          span:
                                            start: 1343
                                            end: 1348
                                        property:
                                          kind:
                                            Identifier: db
                                          span:
                                            start: 1350
                                            end: 1352
                                    span:
                                      start: 1343
                                      end: 1352
                                  method:
                                    kind:
                                      Identifier: query
                                    span:
                                      start: 1354
                                      end: 1359
                                  args:
                                    - name: ~
                                      value:
                                        kind:
                                          String: SELECT * FROM users WHERE id = ?
                                        span:
                                          start: 1360
                                          end: 1394
                                      unpack: false
                                      span:
                                        start: 1360
                                        end: 1394
                              span:
                                start: 1343
                                end: 1395
                        span:
                          start: 1335
                          end: 1395
                    span:
                      start: 1335
                      end: 1405
                  - kind:
                      Return:
                        kind:
                          Ternary:
                            condition:
                              kind:
                                Isset:
                                  - kind:
                                      ArrayAccess:
                                        array:
                                          kind:
                                            Variable: rows
                                          span:
                                            start: 1418
                                            end: 1423
                                        index:
                                          kind:
                                            Int: 0
                                          span:
                                            start: 1424
                                            end: 1425
                                    span:
                                      start: 1418
                                      end: 1426
                              span:
                                start: 1412
                                end: 1427
                            then_expr:
                              kind:
                                MethodCall:
                                  object:
                                    kind:
                                      Variable: this
                                    span:
                                      start: 1430
                                      end: 1435
                                  method:
                                    kind:
                                      Identifier: hydrate
                                    span:
                                      start: 1437
                                      end: 1444
                                  args:
                                    - name: ~
                                      value:
                                        kind:
                                          ArrayAccess:
                                            array:
                                              kind:
                                                Variable: rows
                                              span:
                                                start: 1445
                                                end: 1450
                                            index:
                                              kind:
                                                Int: 0
                                              span:
                                                start: 1451
                                                end: 1452
                                        span:
                                          start: 1445
                                          end: 1453
                                      unpack: false
                                      span:
                                        start: 1445
                                        end: 1453
                              span:
                                start: 1430
                                end: 1455
                            else_expr:
                              kind: "Null"
                              span:
                                start: 1457
                                end: 1461
                        span:
                          start: 1412
                          end: 1461
                    span:
                      start: 1405
                      end: 1467
                attributes: []
            span:
              start: 1255
              end: 1474
          - kind:
              Method:
                name: findAll
                visibility: Public
                is_static: false
                is_abstract: false
                is_final: false
                by_ref: false
                params: []
                return_type:
                  kind:
                    Named:
                      parts:
                        - array
                      kind: Unqualified
                      span:
                        start: 1501
                        end: 1506
                  span:
                    start: 1501
                    end: 1506
                body:
                  - kind:
                      Expression:
                        kind:
                          UnaryPostfix:
                            operand:
                              kind:
                                StaticPropertyAccess:
                                  class:
                                    kind:
                                      Identifier: self
                                    span:
                                      start: 1521
                                      end: 1525
                                  member: queryCount
                              span:
                                start: 1521
                                end: 1538
                            op: PostIncrement
                        span:
                          start: 1521
                          end: 1540
                    span:
                      start: 1521
                      end: 1550
                  - kind:
                      Expression:
                        kind:
                          Assign:
                            target:
                              kind:
                                Variable: rows
                              span:
                                start: 1550
                                end: 1555
                            op: Assign
                            value:
                              kind:
                                MethodCall:
                                  object:
                                    kind:
                                      PropertyAccess:
                                        object:
                                          kind:
                                            Variable: this
                                          span:
                                            start: 1558
                                            end: 1563
                                        property:
                                          kind:
                                            Identifier: db
                                          span:
                                            start: 1565
                                            end: 1567
                                    span:
                                      start: 1558
                                      end: 1567
                                  method:
                                    kind:
                                      Identifier: query
                                    span:
                                      start: 1569
                                      end: 1574
                                  args:
                                    - name: ~
                                      value:
                                        kind:
                                          Binary:
                                            left:
                                              kind:
                                                String: "SELECT * FROM "
                                              span:
                                                start: 1575
                                                end: 1591
                                            op: Concat
                                            right:
                                              kind:
                                                MethodCall:
                                                  object:
                                                    kind:
                                                      Variable: this
                                                    span:
                                                      start: 1594
                                                      end: 1599
                                                  method:
                                                    kind:
                                                      Identifier: tableName
                                                    span:
                                                      start: 1601
                                                      end: 1610
                                                  args: []
                                              span:
                                                start: 1594
                                                end: 1612
                                        span:
                                          start: 1575
                                          end: 1612
                                      unpack: false
                                      span:
                                        start: 1575
                                        end: 1612
                              span:
                                start: 1558
                                end: 1613
                        span:
                          start: 1550
                          end: 1613
                    span:
                      start: 1550
                      end: 1623
                  - kind:
                      Return:
                        kind:
                          FunctionCall:
                            name:
                              kind:
                                Identifier: array_map
                              span:
                                start: 1630
                                end: 1639
                            args:
                              - name: ~
                                value:
                                  kind:
                                    ArrowFunction:
                                      is_static: false
                                      by_ref: false
                                      params:
                                        - name: row
                                          type_hint:
                                            kind:
                                              Named:
                                                parts:
                                                  - array
                                                kind: Unqualified
                                                span:
                                                  start: 1643
                                                  end: 1648
                                            span:
                                              start: 1643
                                              end: 1648
                                          default: ~
                                          by_ref: false
                                          variadic: false
                                          visibility: ~
                                          attributes: []
                                          span:
                                            start: 1643
                                            end: 1653
                                      return_type: ~
                                      body:
                                        kind:
                                          MethodCall:
                                            object:
                                              kind:
                                                Variable: this
                                              span:
                                                start: 1658
                                                end: 1663
                                            method:
                                              kind:
                                                Identifier: hydrate
                                              span:
                                                start: 1665
                                                end: 1672
                                            args:
                                              - name: ~
                                                value:
                                                  kind:
                                                    Variable: row
                                                  span:
                                                    start: 1673
                                                    end: 1677
                                                unpack: false
                                                span:
                                                  start: 1673
                                                  end: 1677
                                        span:
                                          start: 1658
                                          end: 1678
                                  span:
                                    start: 1640
                                    end: 1678
                                unpack: false
                                span:
                                  start: 1640
                                  end: 1678
                              - name: ~
                                value:
                                  kind:
                                    Variable: rows
                                  span:
                                    start: 1680
                                    end: 1685
                                unpack: false
                                span:
                                  start: 1680
                                  end: 1685
                        span:
                          start: 1630
                          end: 1686
                    span:
                      start: 1623
                      end: 1692
                attributes: []
            span:
              start: 1474
              end: 1699
          - kind:
              Method:
                name: findByEmail
                visibility: Public
                is_static: false
                is_abstract: false
                is_final: false
                by_ref: false
                params:
                  - name: email
                    type_hint:
                      kind:
                        Named:
                          parts:
                            - string
                          kind: Unqualified
                          span:
                            start: 1727
                            end: 1733
                      span:
                        start: 1727
                        end: 1733
                    default: ~
                    by_ref: false
                    variadic: false
                    visibility: ~
                    attributes: []
                    span:
                      start: 1727
                      end: 1740
                return_type:
                  kind:
                    Nullable:
                      kind:
                        Named:
                          parts:
                            - User
                          kind: Unqualified
                          span:
                            start: 1744
                            end: 1753
                      span:
                        start: 1744
                        end: 1753
                  span:
                    start: 1743
                    end: 1753
                body:
                  - kind:
                      Expression:
                        kind:
                          Assign:
                            target:
                              kind:
                                Variable: sanitized
                              span:
                                start: 1763
                                end: 1773
                            op: Assign
                            value:
                              kind:
                                FunctionCall:
                                  name:
                                    kind:
                                      Identifier: sanitize
                                    span:
                                      start: 1776
                                      end: 1784
                                  args:
                                    - name: ~
                                      value:
                                        kind:
                                          Variable: email
                                        span:
                                          start: 1785
                                          end: 1791
                                      unpack: false
                                      span:
                                        start: 1785
                                        end: 1791
                              span:
                                start: 1776
                                end: 1792
                        span:
                          start: 1763
                          end: 1792
                    span:
                      start: 1763
                      end: 1802
                  - kind:
                      Expression:
                        kind:
                          Assign:
                            target:
                              kind:
                                Variable: users
                              span:
                                start: 1802
                                end: 1808
                            op: Assign
                            value:
                              kind:
                                MethodCall:
                                  object:
                                    kind:
                                      Variable: this
                                    span:
                                      start: 1811
                                      end: 1816
                                  method:
                                    kind:
                                      Identifier: findAll
                                    span:
                                      start: 1818
                                      end: 1825
                                  args: []
                              span:
                                start: 1811
                                end: 1827
                        span:
                          start: 1802
                          end: 1827
                    span:
                      start: 1802
                      end: 1837
                  - kind:
                      Expression:
                        kind:
                          Assign:
                            target:
                              kind:
                                Variable: filtered
                              span:
                                start: 1837
                                end: 1846
                            op: Assign
                            value:
                              kind:
                                FunctionCall:
                                  name:
                                    kind:
                                      Identifier: array_filter
                                    span:
                                      start: 1849
                                      end: 1861
                                  args:
                                    - name: ~
                                      value:
                                        kind:
                                          Variable: users
                                        span:
                                          start: 1875
                                          end: 1881
                                      unpack: false
                                      span:
                                        start: 1875
                                        end: 1881
                                    - name: ~
                                      value:
                                        kind:
                                          Closure:
                                            is_static: false
                                            by_ref: false
                                            params:
                                              - name: u
                                                type_hint:
                                                  kind:
                                                    Named:
                                                      parts:
                                                        - User
                                                      kind: Unqualified
                                                      span:
                                                        start: 1904
                                                        end: 1909
                                                  span:
                                                    start: 1904
                                                    end: 1909
                                                default: ~
                                                by_ref: false
                                                variadic: false
                                                visibility: ~
                                                attributes: []
                                                span:
                                                  start: 1904
                                                  end: 1911
                                            use_vars:
                                              - name: sanitized
                                                by_ref: false
                                                span:
                                                  start: 1918
                                                  end: 1928
                                            return_type:
                                              kind:
                                                Named:
                                                  parts:
                                                    - bool
                                                  kind: Unqualified
                                                  span:
                                                    start: 1931
                                                    end: 1935
                                              span:
                                                start: 1931
                                                end: 1935
                                            body:
                                              - kind:
                                                  Return:
                                                    kind:
                                                      Binary:
                                                        left:
                                                          kind:
                                                            PropertyAccess:
                                                              object:
                                                                kind:
                                                                  Variable: u
                                                                span:
                                                                  start: 1961
                                                                  end: 1963
                                                              property:
                                                                kind:
                                                                  Identifier: email
                                                                span:
                                                                  start: 1965
                                                                  end: 1970
                                                          span:
                                                            start: 1961
                                                            end: 1970
                                                        op: Identical
                                                        right:
                                                          kind:
                                                            Variable: sanitized
                                                          span:
                                                            start: 1975
                                                            end: 1985
                                                    span:
                                                      start: 1961
                                                      end: 1985
                                                span:
                                                  start: 1954
                                                  end: 1999
                                        span:
                                          start: 1895
                                          end: 2000
                                      unpack: false
                                      span:
                                        start: 1895
                                        end: 2000
                              span:
                                start: 1849
                                end: 2010
                        span:
                          start: 1837
                          end: 2010
                    span:
                      start: 1837
                      end: 2020
                  - kind:
                      Return:
                        kind:
                          NullCoalesce:
                            left:
                              kind:
                                ArrayAccess:
                                  array:
                                    kind:
                                      Variable: filtered
                                    span:
                                      start: 2027
                                      end: 2036
                                  index:
                                    kind:
                                      Int: 0
                                    span:
                                      start: 2037
                                      end: 2038
                              span:
                                start: 2027
                                end: 2040
                            right:
                              kind: "Null"
                              span:
                                start: 2043
                                end: 2047
                        span:
                          start: 2027
                          end: 2047
                    span:
                      start: 2020
                      end: 2053
                attributes: []
            span:
              start: 1699
              end: 2060
          - kind:
              Method:
                name: save
                visibility: Public
                is_static: false
                is_abstract: false
                is_final: false
                by_ref: false
                params:
                  - name: user
                    type_hint:
                      kind:
                        Named:
                          parts:
                            - User
                          kind: Unqualified
                          span:
                            start: 2081
                            end: 2086
                      span:
                        start: 2081
                        end: 2086
                    default: ~
                    by_ref: false
                    variadic: false
                    visibility: ~
                    attributes: []
                    span:
                      start: 2081
                      end: 2091
                return_type:
                  kind:
                    Named:
                      parts:
                        - void
                      kind: Unqualified
                      span:
                        start: 2094
                        end: 2098
                  span:
                    start: 2094
                    end: 2098
                body:
                  - kind:
                      TryCatch:
                        body:
                          - kind:
                              Expression:
                                kind:
                                  MethodCall:
                                    object:
                                      kind:
                                        PropertyAccess:
                                          object:
                                            kind:
                                              Variable: this
                                            span:
                                              start: 2131
                                              end: 2136
                                          property:
                                            kind:
                                              Identifier: db
                                            span:
                                              start: 2138
                                              end: 2140
                                      span:
                                        start: 2131
                                        end: 2140
                                    method:
                                      kind:
                                        Identifier: query
                                      span:
                                        start: 2142
                                        end: 2147
                                    args:
                                      - name: ~
                                        value:
                                          kind:
                                            String: INSERT INTO users VALUES (?)
                                          span:
                                            start: 2148
                                            end: 2178
                                        unpack: false
                                        span:
                                          start: 2148
                                          end: 2178
                                span:
                                  start: 2131
                                  end: 2179
                            span:
                              start: 2131
                              end: 2193
                          - kind:
                              Expression:
                                kind:
                                  MethodCall:
                                    object:
                                      kind:
                                        Variable: this
                                      span:
                                        start: 2193
                                        end: 2198
                                    method:
                                      kind:
                                        Identifier: log
                                      span:
                                        start: 2200
                                        end: 2203
                                    args:
                                      - name: ~
                                        value:
                                          kind:
                                            Binary:
                                              left:
                                                kind:
                                                  String: "User saved: "
                                                span:
                                                  start: 2204
                                                  end: 2218
                                              op: Concat
                                              right:
                                                kind:
                                                  PropertyAccess:
                                                    object:
                                                      kind:
                                                        Variable: user
                                                      span:
                                                        start: 2221
                                                        end: 2226
                                                    property:
                                                      kind:
                                                        Identifier: name
                                                      span:
                                                        start: 2228
                                                        end: 2232
                                                span:
                                                  start: 2221
                                                  end: 2232
                                          span:
                                            start: 2204
                                            end: 2232
                                        unpack: false
                                        span:
                                          start: 2204
                                          end: 2232
                                span:
                                  start: 2193
                                  end: 2233
                            span:
                              start: 2193
                              end: 2243
                        catches:
                          - types:
                              - parts:
                                  - PDOException
                                kind: FullyQualified
                                span:
                                  start: 2252
                                  end: 2266
                            var: e
                            body:
                              - kind:
                                  Expression:
                                    kind:
                                      MethodCall:
                                        object:
                                          kind:
                                            Variable: this
                                          span:
                                            start: 2284
                                            end: 2289
                                        method:
                                          kind:
                                            Identifier: log
                                          span:
                                            start: 2291
                                            end: 2294
                                        args:
                                          - name: ~
                                            value:
                                              kind:
                                                Binary:
                                                  left:
                                                    kind:
                                                      String: "Save failed: "
                                                    span:
                                                      start: 2295
                                                      end: 2310
                                                  op: Concat
                                                  right:
                                                    kind:
                                                      MethodCall:
                                                        object:
                                                          kind:
                                                            Variable: e
                                                          span:
                                                            start: 2313
                                                            end: 2315
                                                        method:
                                                          kind:
                                                            Identifier: getMessage
                                                          span:
                                                            start: 2317
                                                            end: 2327
                                                        args: []
                                                    span:
                                                      start: 2313
                                                      end: 2329
                                              span:
                                                start: 2295
                                                end: 2329
                                            unpack: false
                                            span:
                                              start: 2295
                                              end: 2329
                                    span:
                                      start: 2284
                                      end: 2330
                                span:
                                  start: 2284
                                  end: 2344
                              - kind:
                                  Throw:
                                    kind:
                                      Variable: e
                                    span:
                                      start: 2350
                                      end: 2352
                                span:
                                  start: 2344
                                  end: 2362
                            span:
                              start: 2251
                              end: 2368
                        finally: ~
                    span:
                      start: 2113
                      end: 2368
                attributes: []
            span:
              start: 2060
              end: 2375
          - kind:
              Method:
                name: delete
                visibility: Public
                is_static: false
                is_abstract: false
                is_final: false
                by_ref: false
                params:
                  - name: id
                    type_hint:
                      kind:
                        Named:
                          parts:
                            - int
                          kind: Unqualified
                          span:
                            start: 2398
                            end: 2401
                      span:
                        start: 2398
                        end: 2401
                    default: ~
                    by_ref: false
                    variadic: false
                    visibility: ~
                    attributes: []
                    span:
                      start: 2398
                      end: 2405
                return_type:
                  kind:
                    Named:
                      parts:
                        - void
                      kind: Unqualified
                      span:
                        start: 2408
                        end: 2412
                  span:
                    start: 2408
                    end: 2412
                body:
                  - kind:
                      Expression:
                        kind:
                          Assign:
                            target:
                              kind:
                                Variable: user
                              span:
                                start: 2427
                                end: 2432
                            op: Assign
                            value:
                              kind:
                                NullCoalesce:
                                  left:
                                    kind:
                                      MethodCall:
                                        object:
                                          kind:
                                            Variable: this
                                          span:
                                            start: 2435
                                            end: 2440
                                        method:
                                          kind:
                                            Identifier: find
                                          span:
                                            start: 2442
                                            end: 2446
                                        args:
                                          - name: ~
                                            value:
                                              kind:
                                                Variable: id
                                              span:
                                                start: 2447
                                                end: 2450
                                            unpack: false
                                            span:
                                              start: 2447
                                              end: 2450
                                    span:
                                      start: 2435
                                      end: 2452
                                  right:
                                    kind:
                                      ThrowExpr:
                                        kind:
                                          New:
                                            class:
                                              kind:
                                                Identifier: "\\RuntimeException"
                                              span:
                                                start: 2465
                                                end: 2482
                                            args:
                                              - name: ~
                                                value:
                                                  kind:
                                                    String: User not found
                                                  span:
                                                    start: 2483
                                                    end: 2499
                                                unpack: false
                                                span:
                                                  start: 2483
                                                  end: 2499
                                        span:
                                          start: 2461
                                          end: 2500
                                    span:
                                      start: 2455
                                      end: 2500
                              span:
                                start: 2435
                                end: 2500
                        span:
                          start: 2427
                          end: 2500
                    span:
                      start: 2427
                      end: 2510
                  - kind:
                      Expression:
                        kind:
                          MethodCall:
                            object:
                              kind:
                                PropertyAccess:
                                  object:
                                    kind:
                                      Variable: this
                                    span:
                                      start: 2510
                                      end: 2515
                                  property:
                                    kind:
                                      Identifier: db
                                    span:
                                      start: 2517
                                      end: 2519
                              span:
                                start: 2510
                                end: 2519
                            method:
                              kind:
                                Identifier: query
                              span:
                                start: 2521
                                end: 2526
                            args:
                              - name: ~
                                value:
                                  kind:
                                    String: DELETE FROM users WHERE id = ?
                                  span:
                                    start: 2527
                                    end: 2559
                                unpack: false
                                span:
                                  start: 2527
                                  end: 2559
                        span:
                          start: 2510
                          end: 2560
                    span:
                      start: 2510
                      end: 2570
                  - kind:
                      Expression:
                        kind:
                          MethodCall:
                            object:
                              kind:
                                Variable: this
                              span:
                                start: 2570
                                end: 2575
                            method:
                              kind:
                                Identifier: log
                              span:
                                start: 2577
                                end: 2580
                            args:
                              - name: ~
                                value:
                                  kind:
                                    Binary:
                                      left:
                                        kind:
                                          String: "User deleted: "
                                        span:
                                          start: 2581
                                          end: 2597
                                      op: Concat
                                      right:
                                        kind:
                                          PropertyAccess:
                                            object:
                                              kind:
                                                Variable: user
                                              span:
                                                start: 2600
                                                end: 2605
                                            property:
                                              kind:
                                                Identifier: name
                                              span:
                                                start: 2607
                                                end: 2611
                                        span:
                                          start: 2600
                                          end: 2611
                                  span:
                                    start: 2581
                                    end: 2611
                                unpack: false
                                span:
                                  start: 2581
                                  end: 2611
                        span:
                          start: 2570
                          end: 2612
                    span:
                      start: 2570
                      end: 2618
                attributes: []
            span:
              start: 2375
              end: 2625
          - kind:
              Method:
                name: getQueryCount
                visibility: Public
                is_static: true
                is_abstract: false
                is_final: false
                by_ref: false
                params: []
                return_type:
                  kind:
                    Named:
                      parts:
                        - int
                      kind: Unqualified
                      span:
                        start: 2665
                        end: 2668
                  span:
                    start: 2665
                    end: 2668
                body:
                  - kind:
                      Return:
                        kind:
                          StaticPropertyAccess:
                            class:
                              kind:
                                Identifier: self
                              span:
                                start: 2690
                                end: 2694
                            member: queryCount
                        span:
                          start: 2690
                          end: 2707
                    span:
                      start: 2683
                      end: 2713
                attributes: []
            span:
              start: 2625
              end: 2715
        attributes: []
    span:
      start: 782
      end: 2716
span:
  start: 0
  end: 2716
